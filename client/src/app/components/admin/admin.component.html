
<h2>Admin Dashboard</h2>
<h4>Send notification</h4>
<mat-form-field>
  <mat-label>Toast message</mat-label>
  <input #toastInput matInput type="text" [(ngModel)]="msg">
  <button matSuffix mat-flat-button [disabled]="!msg" (click)="sendMsg()">Send</button>
</mat-form-field>
<mat-tab-group>
  <mat-tab label="Rooms">
    <ng-container *ngTemplateOutlet="rooms"></ng-container>
  </mat-tab>
  <mat-tab label="Players">
    <ng-container *ngTemplateOutlet="players"></ng-container>
  </mat-tab>
</mat-tab-group>
<div class="flex-1"></div>
<button matSuffix mat-flat-button [disabled]="gameService.status().started" (click)="startGame()">
  {{gameService.status().started ? 'It has begin' : 'Start Game'}}
</button>

<ng-template #players>
  <div class="container">
    <div class="container-item-inner">
      @for (player of playerService.players(); track player.id) {
        <div class="container-item-inner-box">
          <h4>{{player.name}}</h4>
          <div>Items:</div>
          <ul>
            @for (item of player.items; track item.id) {
              <li>{{ item.name }}</li>
            } @empty {
              <span>No items</span>
            }
          </ul>
        </div>
      }
    </div>
  </div>
</ng-template>

<ng-template #rooms>
  <div class="container">
    @for (level of roomService.house() | keyvalue; track level.key) {
      <div class="container-item">
        <h4>{{ level.value.name }}</h4>
        <div class="container-item-inner">
          @for (room of level.value.rooms | keyvalue; track room.key) {
            <div class="container-item-inner-box">
              <h4>{{ room.value.name }}</h4>
              <div>Players:</div>
              <ul>
                @for (player of room.value.players; track player) {
                  <li>{{ player.name }}</li>
                } @empty {
                  <span>No players</span>
                }
              </ul>
              <div>Items:</div>
              <ul>
                @for (item of room.value.items; track item) {
                  <li>{{ item.name }} {{ item.player?.name ? `(${item.player?.name})` : ''}}</li>
                } @empty {
                  <span>No items</span>
                }
              </ul>
            </div>
          } @empty {
            <span>No floors</span>
          }
        </div>
      </div>
    } @empty {
      <span>No rooms</span>
    }
  </div>
</ng-template>
